{"dependencies":[{"name":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\dibujo\\tsconfig.json","includedInParent":true,"mtime":1522616336000},{"name":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\dibujo\\package.json","includedInParent":true,"mtime":1531328541070},{"name":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\package.json","includedInParent":true,"mtime":1531329788790},{"name":"../graphics/Graphic","loc":{"line":16,"column":40},"parent":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\dibujo\\src\\Media\\Picture.ts","resolved":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\dibujo\\src\\graphics\\Graphic.ts"},{"name":"vector_class","loc":{"line":17,"column":29},"parent":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\dibujo\\src\\Media\\Picture.ts","resolved":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\vector_class\\src\\index.ts"}],"generated":{"js":"\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nexports.__esModule = true;\r\nvar Graphic_1 = __importDefault(require(\"../graphics/Graphic\"));\r\nvar vector_class_1 = require(\"vector_class\");\r\n// Imaginary canvas\r\nvar canvas = document.createElement('canvas');\r\nvar context = canvas.getContext('2d');\r\nvar Picture = /** @class */ (function (_super) {\r\n    __extends(Picture, _super);\r\n    function Picture(data) {\r\n        var _this = _super.call(this, data) || this;\r\n        _this.type = \"img\";\r\n        _this.ready = false;\r\n        _this.todo = [];\r\n        _this.params = [];\r\n        _this.image = new Image();\r\n        _this.image.src = data.src;\r\n        document.body.appendChild(_this.image);\r\n        _this.image.addEventListener('load', function () {\r\n            _this.ready = true;\r\n            _this.todo.forEach(function (met, i) {\r\n                met.apply(void 0, _this.params[i]);\r\n            });\r\n        });\r\n        /*\r\n            this.image.addEventListener('error', (err) => {\r\n              console.log(err)\r\n              console.log(this.image)\r\n              console.error('Error loading the image...')\r\n            })\r\n        */\r\n        _this.angle = data.angle ? data.angle : 0;\r\n        _this.opacity = data.opacity ? data.opacity : 1;\r\n        _this.width = data.width ? data.width : _this.image.width;\r\n        _this.height = data.height ? data.height : _this.image.height;\r\n        return _this;\r\n    }\r\n    Picture.prototype.filter = function () {\r\n    };\r\n    Picture.prototype.getImageData = function () {\r\n        context.clearRect(0, 0, window.innerWidth, window.innerHeight);\r\n        canvas.width = this.width;\r\n        canvas.height = this.height;\r\n        context.drawImage(this.image, 0, 0, this.width, this.height);\r\n        return context.getImageData(0, 0, this.width, this.height);\r\n    };\r\n    Picture.prototype.removeColor = function (color) {\r\n        if (this.ready) {\r\n            var image = void 0;\r\n            if (!this.data) {\r\n                image = this.getImageData();\r\n            }\r\n            else {\r\n                image = this.data;\r\n            }\r\n            for (var pixel = 0; pixel < image.data.length; pixel += 4) {\r\n                if (image.data[pixel] === color[0] && image.data[pixel + 1] === color[1] && image.data[pixel + 2] === color[2]) {\r\n                    image.data[pixel + 3] = 0;\r\n                }\r\n            }\r\n            this.data = image;\r\n            this.render = this.renderData;\r\n        }\r\n        else {\r\n            this.todo.push(this.removeColor.bind(this));\r\n            this.params.push([color]);\r\n        }\r\n    };\r\n    Picture.prototype.onClick = function (func) {\r\n    };\r\n    Picture.prototype.realPosition = function () {\r\n        return new vector_class_1.Vector2D(this.position.x - (this.anchor.x * this.width), this.position.y - (this.anchor.y * this.height));\r\n    };\r\n    Picture.prototype.renderData = function () {\r\n        //  console.log('here')\r\n        //console.log(this.data)\r\n        this.context.beginPath();\r\n        this.context.save();\r\n        // this.context.translate(this.position.x -(this.anchor.x *  this.width), this.position.y -(this.anchor.y *  this.height))\r\n        //this.context.rotate(this.angle)\r\n        // this.context.globalAlpha = this.opacity\r\n        // console.log(this.data)\r\n        this.context.putImageData(this.data, this.position.x - (this.anchor.x * this.width), this.position.y - (this.anchor.y * this.height)); // -(this.anchor.x *  this.width), -(this.anchor.y *  this.height), this.position.x, this.position.y, this.width, this.height)\r\n        // this.context.drawImage(this.image, this.position.x, this.position.y, this.width, this.height)\r\n        this.context.restore();\r\n    };\r\n    Picture.prototype.render = function () {\r\n        this.context.beginPath();\r\n        this.context.save();\r\n        this.context.translate(this.position.x, this.position.y);\r\n        this.context.rotate(this.angle);\r\n        this.context.globalAlpha = this.opacity;\r\n        this.context.drawImage(this.image, -(this.anchor.x * this.width), -(this.anchor.y * this.height), this.width, this.height);\r\n        // this.context.drawImage(this.image, this.position.x, this.position.y, this.width, this.height)\r\n        this.context.restore();\r\n    };\r\n    return Picture;\r\n}(Graphic_1[\"default\"]));\r\nexports[\"default\"] = Picture;\r\n","map":{"version":3,"file":"Picture.js","sourceRoot":"","sources":["node_modules\\dibujo\\src\\Media\\Picture.ts"],"names":[],"mappings":"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","sourcesContent":["import Graphic from '../graphics/Graphic'\r\nimport { Vector2D } from 'vector_class'\r\n\r\n// Imaginary canvas\r\nconst canvas = document.createElement('canvas')\r\nconst context = canvas.getContext('2d')    \r\n\r\nclass Picture extends Graphic {\r\n  public width: number\r\n  public height: number\r\n  public opacity: number\r\n  public image: HTMLImageElement\r\n  public angle: number\r\n  public type: string = \"img\"\r\n  public data: any\r\n  public ready: boolean = false\r\n  public todo: Array<Function> = []\r\n  public params: Array<any> = []\r\n\r\n  constructor(data: any) {\r\n    super(data)\r\n    this.image = new Image()\r\n    this.image.src = data.src\r\n    document.body.appendChild(this.image)\r\n    this.image.addEventListener('load', () => {\r\n      this.ready = true\r\n      this.todo.forEach((met, i) => {\r\n        met(...this.params[i])\r\n      })\r\n    })\r\n/*\r\n    this.image.addEventListener('error', (err) => {\r\n      console.log(err)\r\n      console.log(this.image)\r\n      console.error('Error loading the image...')\r\n    })\r\n*/\r\n    this.angle = data.angle ? data.angle : 0\r\n    this.opacity = data.opacity ? data.opacity : 1\r\n    this.width = data.width ? data.width : this.image.width\r\n    this.height = data.height ? data.height : this.image.height\r\n  }\r\n\r\n  filter() {\r\n\r\n  }\r\n\r\n  getImageData() {\r\n    context.clearRect(0, 0, window.innerWidth, window.innerHeight)\r\n    canvas.width = this.width\r\n    canvas.height = this.height\r\n    context.drawImage(this.image, 0, 0, this.width, this.height)\r\n    return context.getImageData(0, 0, this.width, this.height)\r\n  }\r\n\r\n  removeColor(color: Array<number>) {\r\n    if (this.ready) {\r\n      let image\r\n      if (!this.data) {\r\n        image = this.getImageData()\r\n      } else {\r\n        image = this.data\r\n      }\r\n\r\n      for (let pixel = 0; pixel < image.data.length; pixel += 4) {\r\n        if (image.data[pixel] === color[0] && image.data[pixel + 1] === color[1] && image.data[pixel + 2] === color[2]) {\r\n          image.data[pixel + 3] = 0\r\n        }\r\n      }\r\n\r\n      this.data = image\r\n      this.render = this.renderData\r\n    } else {\r\n      this.todo.push(this.removeColor.bind(this))\r\n      this.params.push([color])\r\n    }\r\n  }\r\n\r\n  onClick(func: Function): void {\r\n\r\n  }\r\n  realPosition() {\r\n    return new Vector2D(this.position.x - (this.anchor.x * this.width), this.position.y - (this.anchor.y * this.height))\r\n  }\r\n\r\n  renderData(): void {\r\n  //  console.log('here')\r\n    //console.log(this.data)\r\n    this.context.beginPath()\r\n    this.context.save()\r\n    // this.context.translate(this.position.x -(this.anchor.x *  this.width), this.position.y -(this.anchor.y *  this.height))\r\n    //this.context.rotate(this.angle)\r\n    // this.context.globalAlpha = this.opacity\r\n    // console.log(this.data)\r\n    this.context.putImageData(this.data, this.position.x -(this.anchor.x *  this.width), this.position.y -(this.anchor.y *  this.height))// -(this.anchor.x *  this.width), -(this.anchor.y *  this.height), this.position.x, this.position.y, this.width, this.height)\r\n    // this.context.drawImage(this.image, this.position.x, this.position.y, this.width, this.height)\r\n    this.context.restore()\r\n  }\r\n\r\n  render(): void {\r\n    this.context.beginPath()\r\n    this.context.save()\r\n    this.context.translate(this.position.x, this.position.y)\r\n    this.context.rotate(this.angle)\r\n    this.context.globalAlpha = this.opacity\r\n    this.context.drawImage(this.image, -(this.anchor.x * this.width), -(this.anchor.y * this.height), this.width, this.height)\r\n    // this.context.drawImage(this.image, this.position.x, this.position.y, this.width, this.height)\r\n    this.context.restore()\r\n  }\r\n}\r\n\r\nexport default Picture\r\n"]}},"hash":"4315661797322c63c757e747ea68987c","cacheData":{"env":{}},"id":43}