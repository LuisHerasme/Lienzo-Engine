{"dependencies":[{"name":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\dibujo\\tsconfig.json","includedInParent":true,"mtime":1522616336000},{"name":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\dibujo\\package.json","includedInParent":true,"mtime":1531328541070},{"name":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\package.json","includedInParent":true,"mtime":1531329788790},{"name":"vector_class","loc":{"line":3,"column":29},"parent":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\dibujo\\src\\Camera.ts","resolved":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\vector_class\\src\\index.ts"},{"name":"./index","loc":{"line":4,"column":22},"parent":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\dibujo\\src\\Camera.ts","resolved":"C:\\Users\\Luis Herasme\\Desktop\\LienzoEngine\\node_modules\\dibujo\\src\\index.ts"}],"generated":{"js":"\"use strict\";\r\nexports.__esModule = true;\r\nvar vector_class_1 = require(\"vector_class\");\r\nvar index_1 = require(\"./index\");\r\nvar Camera = /** @class */ (function () {\r\n    function Camera(context) {\r\n        this.keyMap = { up: 'w', down: 's', left: 'a', right: 'd' };\r\n        this.position = new vector_class_1.Vector2D(0, 0);\r\n        this.fLastPosition = new vector_class_1.Vector2D(0, 0);\r\n        this.followingX = false;\r\n        this.followingY = false;\r\n        this.keyTranslateEnabled = false;\r\n        this.velocity = new vector_class_1.Vector2D(0, 0);\r\n        this.acceleration = new vector_class_1.Vector2D(0, 0);\r\n        this.friction = 0.9;\r\n        this.context = context;\r\n    }\r\n    Camera.prototype.addForce = function (force) {\r\n        this.acceleration.add(force);\r\n    };\r\n    /*\r\n      enable() {\r\n        document.addEventListener('mousemove', (e) => {\r\n          this.mouse.position.x = e.clientX\r\n          this.mouse.position.y = e.clientY\r\n        })\r\n      }\r\n    */\r\n    Camera.prototype.getMouse = function () {\r\n        return vector_class_1.Vector2D.add(index_1.mouse.position, this.position);\r\n    };\r\n    Camera.prototype.disableKeyTranslate = function () {\r\n    };\r\n    Camera.prototype.enableKeyTranslate = function () {\r\n        var _this = this;\r\n        this.keyTranslateEnabled = true;\r\n        document.addEventListener('keypress', function (e) {\r\n            if (e.key.toLowerCase() === _this.keyMap.up) {\r\n                _this.addForce(new vector_class_1.Vector2D(0, 10));\r\n            }\r\n            if (e.key.toLowerCase() === _this.keyMap.down) {\r\n                _this.addForce(new vector_class_1.Vector2D(0, -10));\r\n            }\r\n            if (e.key.toLowerCase() === _this.keyMap.left) {\r\n                _this.addForce(new vector_class_1.Vector2D(10, 0));\r\n            }\r\n            if (e.key.toLowerCase() === _this.keyMap.right) {\r\n                _this.addForce(new vector_class_1.Vector2D(-10, 0));\r\n            }\r\n        });\r\n    };\r\n    Camera.prototype.follow = function (graphic) {\r\n        this.followedPosition = graphic.position;\r\n        this.fLastPosition = this.followedPosition.copy();\r\n        this.followingX = true;\r\n        this.followingY = true;\r\n    };\r\n    Camera.prototype.followX = function (graphic) {\r\n        this.followedPosition = graphic.position;\r\n        this.followingX = true;\r\n    };\r\n    Camera.prototype.followY = function (graphic) {\r\n        this.followedPosition = graphic.position;\r\n        this.followingY = true;\r\n    };\r\n    Camera.prototype.stopFollowing = function () {\r\n        this.followingX = false;\r\n        this.followingY = false;\r\n    };\r\n    Camera.prototype.stopFollowingX = function () {\r\n        this.followingX = false;\r\n    };\r\n    Camera.prototype.stopFollowingY = function () {\r\n        this.followingY = false;\r\n    };\r\n    Camera.prototype.zoom = function (where, howMuch) {\r\n        this.context.translate(where.x, where.y);\r\n        this.context.scale(howMuch.x, howMuch.y);\r\n        this.context.translate(-where.x, -where.y);\r\n    };\r\n    Camera.prototype.translate = function (x, y) {\r\n        this.position.x -= x;\r\n        this.position.y -= y;\r\n        this.context.translate(x, y);\r\n    };\r\n    Camera.prototype.update = function () {\r\n        if (this.keyTranslateEnabled) {\r\n            this.velocity.add(this.acceleration);\r\n            this.velocity.mult(this.friction);\r\n            this.translate(this.velocity.x, this.velocity.y);\r\n            this.position.add(this.velocity);\r\n            this.acceleration.zero();\r\n        }\r\n        if (this.followingX || this.followingY) {\r\n            var change = vector_class_1.Vector2D.sub(this.fLastPosition, this.followedPosition);\r\n            this.fLastPosition = this.followedPosition.copy();\r\n            this.translate(change.x, change.y);\r\n        }\r\n    };\r\n    return Camera;\r\n}());\r\nexports[\"default\"] = Camera;\r\n","map":{"version":3,"file":"Camera.js","sourceRoot":"","sources":["node_modules\\dibujo\\src\\Camera.ts"],"names":[],"mappings":";;AAAA,6CAAuC;AAGvC,iCAA6B;AAE7B;IAaE,gBAAa,OAAiC;QAXvC,WAAM,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAA;QACtD,aAAQ,GAAa,IAAI,uBAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;QAEtC,kBAAa,GAAa,IAAI,uBAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;QAC5C,eAAU,GAAY,KAAK,CAAA;QAC3B,eAAU,GAAY,KAAK,CAAA;QAC3B,wBAAmB,GAAY,KAAK,CAAA;QACpC,aAAQ,GAAa,IAAI,uBAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;QACvC,iBAAY,GAAa,IAAI,uBAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;QAC3C,aAAQ,GAAW,GAAG,CAAA;QAG5B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;IACxB,CAAC;IAED,yBAAQ,GAAR,UAAS,KAAe;QACtB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;IAC9B,CAAC;IACH;;;;;;;MAOE;IACA,yBAAQ,GAAR;QACE,OAAO,uBAAQ,CAAC,GAAG,CAAC,aAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;IACpD,CAAC;IAED,oCAAmB,GAAnB;IAEA,CAAC;IAED,mCAAkB,GAAlB;QAAA,iBAgBC;QAfC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAA;QAC/B,QAAQ,CAAC,gBAAgB,CAAC,UAAU,EAAE,UAAC,CAAC;YACtC,IAAI,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,KAAK,KAAI,CAAC,MAAM,CAAC,EAAE,EAAE;gBAC1C,KAAI,CAAC,QAAQ,CAAC,IAAI,uBAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;aACnC;YACD,IAAI,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,KAAK,KAAI,CAAC,MAAM,CAAC,IAAI,EAAE;gBAC5C,KAAI,CAAC,QAAQ,CAAC,IAAI,uBAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;aACpC;YACD,IAAI,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,KAAK,KAAI,CAAC,MAAM,CAAC,IAAI,EAAE;gBAC5C,KAAI,CAAC,QAAQ,CAAC,IAAI,uBAAQ,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAA;aACnC;YACD,IAAI,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,KAAK,KAAI,CAAC,MAAM,CAAC,KAAK,EAAE;gBAC7C,KAAI,CAAC,QAAQ,CAAC,IAAI,uBAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAA;aACpC;QACH,CAAC,CAAC,CAAA;IACJ,CAAC;IAED,uBAAM,GAAN,UAAO,OAAgB;QACrB,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,QAAQ,CAAA;QACxC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAA;QACjD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAA;QACtB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAA;IACxB,CAAC;IAED,wBAAO,GAAP,UAAQ,OAAgB;QACtB,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,QAAQ,CAAA;QACxC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAA;IACxB,CAAC;IAED,wBAAO,GAAP,UAAQ,OAAgB;QACtB,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,QAAQ,CAAA;QACxC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAA;IACxB,CAAC;IAED,8BAAa,GAAb;QACE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;QACvB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;IACzB,CAAC;IAED,+BAAc,GAAd;QACE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;IACzB,CAAC;IAED,+BAAc,GAAd;QACE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;IACzB,CAAC;IAED,qBAAI,GAAJ,UAAK,KAAe,EAAE,OAAiB;QACrC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAA;QACxC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAA;QACxC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;IAC5C,CAAC;IAED,0BAAS,GAAT,UAAU,CAAS,EAAE,CAAS;QAC5B,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAA;QACpB,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAA;QACpB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAC9B,CAAC;IAED,uBAAM,GAAN;QACE,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC5B,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;YACpC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;YACjC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;YAChD,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;YAChC,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAA;SACzB;QACD,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,EAAE;YACtC,IAAM,MAAM,GAAG,uBAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAA;YACtE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAA;YACjD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAA;SACnC;IACH,CAAC;IACH,aAAC;AAAD,CAAC,AA9GD,IA8GC;AAED,qBAAe,MAAM,CAAA","sourcesContent":["import { Vector2D } from 'vector_class'\r\nimport Graphic from './graphics/Graphic'\r\nimport Scene from './Scene'\r\nimport {mouse} from './index'\r\n\r\nclass Camera {\r\n  public context: CanvasRenderingContext2D\r\n  public keyMap = { up: 'w', down: 's', left: 'a', right: 'd' }\r\n  public position: Vector2D = new Vector2D(0, 0)\r\n  private followedPosition: Vector2D\r\n  private fLastPosition: Vector2D = new Vector2D(0, 0)\r\n  private followingX: boolean = false\r\n  private followingY: boolean = false\r\n  private keyTranslateEnabled: boolean = false\r\n  private velocity: Vector2D = new Vector2D(0, 0)\r\n  private acceleration: Vector2D = new Vector2D(0, 0)\r\n  private friction: number = 0.9\r\n\r\n  constructor (context: CanvasRenderingContext2D) {\r\n    this.context = context\r\n  }\r\n\r\n  addForce(force: Vector2D): void {\r\n    this.acceleration.add(force)\r\n  }\r\n/*\r\n  enable() {\r\n    document.addEventListener('mousemove', (e) => {\r\n      this.mouse.position.x = e.clientX\r\n      this.mouse.position.y = e.clientY\r\n    })\r\n  }\r\n*/\r\n  getMouse () {\r\n    return Vector2D.add(mouse.position, this.position)\r\n  }\r\n\r\n  disableKeyTranslate() {\r\n\r\n  }\r\n\r\n  enableKeyTranslate() {\r\n    this.keyTranslateEnabled = true\r\n    document.addEventListener('keypress', (e) => {\r\n      if (e.key.toLowerCase() === this.keyMap.up) {\r\n        this.addForce(new Vector2D(0, 10))\r\n      }\r\n      if (e.key.toLowerCase() === this.keyMap.down) {\r\n        this.addForce(new Vector2D(0, -10))\r\n      }\r\n      if (e.key.toLowerCase() === this.keyMap.left) {\r\n        this.addForce(new Vector2D(10, 0))\r\n      }\r\n      if (e.key.toLowerCase() === this.keyMap.right) {\r\n        this.addForce(new Vector2D(-10, 0))\r\n      }\r\n    })\r\n  }\r\n\r\n  follow(graphic: Graphic): void {\r\n    this.followedPosition = graphic.position\r\n    this.fLastPosition = this.followedPosition.copy()\r\n    this.followingX = true\r\n    this.followingY = true\r\n  }\r\n\r\n  followX(graphic: Graphic): void {\r\n    this.followedPosition = graphic.position\r\n    this.followingX = true\r\n  }\r\n\r\n  followY(graphic: Graphic): void {\r\n    this.followedPosition = graphic.position\r\n    this.followingY = true\r\n  }\r\n\r\n  stopFollowing(): void {\r\n    this.followingX = false\r\n    this.followingY = false\r\n  }\r\n\r\n  stopFollowingX(): void {\r\n    this.followingX = false\r\n  }\r\n\r\n  stopFollowingY(): void {\r\n    this.followingY = false\r\n  }\r\n\r\n  zoom(where: Vector2D, howMuch: Vector2D): void {\r\n    this.context.translate(where.x, where.y)\r\n    this.context.scale(howMuch.x, howMuch.y)\r\n    this.context.translate(-where.x, -where.y)\r\n  }\r\n\r\n  translate(x: number, y: number): void {\r\n    this.position.x -= x\r\n    this.position.y -= y\r\n    this.context.translate(x, y)\r\n  }\r\n\r\n  update() {\r\n    if (this.keyTranslateEnabled) {\r\n      this.velocity.add(this.acceleration)\r\n      this.velocity.mult(this.friction)\r\n      this.translate(this.velocity.x, this.velocity.y)\r\n      this.position.add(this.velocity)\r\n      this.acceleration.zero()\r\n    }\r\n    if (this.followingX || this.followingY) {\r\n      const change = Vector2D.sub(this.fLastPosition, this.followedPosition)\r\n      this.fLastPosition = this.followedPosition.copy()\r\n      this.translate(change.x, change.y)\r\n    }\r\n  }\r\n}\r\n\r\nexport default Camera\r\n"]}},"hash":"b7a1dfafd9c0e859d0262ceff6b52024","cacheData":{"env":{}},"id":112}